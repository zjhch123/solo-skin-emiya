!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=25)}({25:function(t,e){const o=t=>{$("html ,body").animate({scrollTop:t},300)},n=$(".J_navbar"),i=$(".toTop"),s=$(".J_article__contents");window.scrollManager=new class{constructor(){this.showBackToTopHeight=100,this.prevScrollY=$(window).scrollTop(),this.scrollY=$(window).scrollTop(),this.contentsStaticTop=$(".J_article__contents").prev().offset().top+$(".J_article__contents").prev().height(),this.isContentsFixed=!1,this.listen(),this.calculate()}checkNavbarFixed(){const t=n.height()+1;this.scrollY<=0?n.removeClass("is-fixed").css("top",0):(n.addClass("is-fixed").css("top",-1*t),this.scrollY<this.prevScrollY?n.addClass("show"):n.removeClass("show"))}checkBackToTop(){this.scrollY>this.showBackToTopHeight?i.fadeIn():i.fadeOut()}checkContents(){const t=$(".J_article__content");if(t.length<=0)return;const e=n.height(),o=t.offset().top+t.height(),i=this.scrollY+e+s.height();return i>=o&&this.isContentsFixed?(s.css({position:"absolute",top:o-s.height()}),void(this.isContentsFixed=!1)):this.scrollY+e<=this.contentsStaticTop?(s.css({position:"static",top:0}),void(this.isContentsFixed=!1)):this.scrollY+e>this.contentsStaticTop&&i<o?(s.css({position:"fixed",top:e}),void(this.isContentsFixed=!0)):void 0}checkContentsHighlight(){const t=n.height()+1,e=$(".J_article__contents--container a");let o;for(let n=0;n<e.length;n++){const i=e.eq(n).attr("data-target");this.scrollY+t>$(i).offset().top&&(o=n)}e.removeClass("active"),e.eq(o).addClass("active")}calculate(){this.checkNavbarFixed(),this.checkBackToTop(),this.checkContents(),this.checkContentsHighlight()}listen(){$(window).on("scroll",()=>{this.prevScrollY=this.scrollY,this.scrollY=$(window).scrollTop(),this.calculate()})}},window.Skin=new class{constructor(){this.listen()}initPageShare(){const t=$(".J_share_wechat"),e=t.data("url"),o=t.data("avatar"),n=encodeURIComponent(`${t.data("title")} - ${t.data("blogtitle")}`),i=encodeURIComponent(e);return{weibo:`http://v.t.sina.com.cn/share/share.php?title=${n}&url=${i}&pic=${o}`,qzone:`https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${i}&sharesource=qzone&title=${n}&pics=${o}`,wechat:e}}initContents(){const t={h1:5,h2:4,h3:3,h4:2,h5:1},e=this.getArticleTitles();if(0===e.length)return void $(".J_article__contents").hide();let o,n,i='<ul class="article__contents">';e.each((function(s,c){const a=t[c.tagName.toLowerCase()],r=e.eq(s).text(),l=$('<i><li><a href="javascript:void(0);" data-target="#'+e.eq(s).attr("id")+'"></a></li></i>');l.find("a").text(r);const h=l.html();a&&(n?a===o?i+=h:a<o?i+=Array(o-a).fill("<ul>").join("")+h:a>o&&(i+=Array(a-o).fill("</ul>").join("")+h):(i+=h,n=a),o=a)})),i+=Array(n-o+1).fill("</ul>").join(""),$(".J_article__contents--container").append(i)}getArticleTitles(){return $(".J_article__content").find("h1,h2,h3,h4,h5,h6")}initArticle(){$(".J_article__contents").removeClass("fn__none");try{this.initContents()}catch(t){$(".J_article__contents").addClass("fn__none"),console.error(t)}}listen(){const t=this;$("body").on("touchstart",(function(){})),$("body").on("click",".J_navbar_toggle",(function(){const t="."+$(this).attr("data-for");$(t).hasClass("show")?$(t).removeClass("show"):$(t).addClass("show")})),$("body").on("click",".J_replyName",(function(){const t=$(this).attr("data-originalId");$("#"+t)[0].scrollIntoViewIfNeeded(!0),$("#"+t).addClass("blink"),setTimeout((function(){$("#"+t).removeClass("blink")}),3e3)})),$("body").on("click",".J_backToTop",(function(t){o(0),t.preventDefault()})),$("body").on("click",".J_article__contents--container a",(function(){const t=$(this).attr("data-target"),e=$(t).offset().top-$(".J_navbar").height()+1;o(e)})),$("body").on("click",".J_share",(function(){const e=t.initPageShare(),o=$(".J_qrcode"),n=$(".J_share_wechat"),i=$(this).data("type");if(i)if("wechat"!==i)window.open(e[i],"_blank","top=100,left=200,width=648,height=618");else if("undefined"==typeof QRious&&Util.addScript(Label.staticServePath+"/js/lib/qrious.min.js","qriousScript"),"none"===o.css("background-image")){const t=120,i=new QRious({element:o[0],value:e.wechat,value:e.wechat,size:t});o.css("background-image",`url(${i.toDataURL("image/jpeg")})`).css("height",t).css("width",t).css("bottom",n.height()).css("background-size",`${t}px ${t}px`),o.slideToggle()}else o.slideToggle()}))}},Util.initPjax(()=>{$(".J_article__contents").addClass("fn__none"),$(".J_article__contents--container").empty()})}});